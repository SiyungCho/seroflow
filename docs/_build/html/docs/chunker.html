

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chunker &mdash; Seroflow 1.0.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=1ed6394b"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Context" href="context.html" />
    <link rel="prev" title="Cache" href="cache.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Seroflow
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="seroflow.html">Seroflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache.html">Cache</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Chunker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Chunker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#seroflow.chunker.chunker.Chunker"><code class="docutils literal notranslate"><span class="pre">Chunker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.chunker.Chunker.__init__"><code class="docutils literal notranslate"><span class="pre">Chunker.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.chunker.Chunker.calculate_chunks"><code class="docutils literal notranslate"><span class="pre">Chunker.calculate_chunks()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.chunker.Chunker.check_keep_executing"><code class="docutils literal notranslate"><span class="pre">Chunker.check_keep_executing()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.chunker.Chunker.dequeue"><code class="docutils literal notranslate"><span class="pre">Chunker.dequeue()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.chunker.Chunker.enqueue"><code class="docutils literal notranslate"><span class="pre">Chunker.enqueue()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.chunker.Chunker.reload"><code class="docutils literal notranslate"><span class="pre">Chunker.reload()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.chunker.Chunker.save"><code class="docutils literal notranslate"><span class="pre">Chunker.save()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#directchunker">DirectChunker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#seroflow.chunker.direct_chunker.DirectChunker"><code class="docutils literal notranslate"><span class="pre">DirectChunker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.direct_chunker.DirectChunker.__init__"><code class="docutils literal notranslate"><span class="pre">DirectChunker.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.direct_chunker.DirectChunker.calculate_chunks"><code class="docutils literal notranslate"><span class="pre">DirectChunker.calculate_chunks()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#distributedchunker">DistributedChunker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#seroflow.chunker.distributed_chunker.DistributedChunker"><code class="docutils literal notranslate"><span class="pre">DistributedChunker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.distributed_chunker.DistributedChunker.__init__"><code class="docutils literal notranslate"><span class="pre">DistributedChunker.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#seroflow.chunker.distributed_chunker.DistributedChunker.calculate_chunks"><code class="docutils literal notranslate"><span class="pre">DistributedChunker.calculate_chunks()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="engine.html">Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="extract.html">Extractors</a></li>
<li class="toctree-l1"><a class="reference internal" href="load.html">Load</a></li>
<li class="toctree-l1"><a class="reference internal" href="log.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="step.html">Step</a></li>
<li class="toctree-l1"><a class="reference internal" href="transform.html">seroflow.transform package</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="wrappers.html">Wrappers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Seroflow</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Chunker</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/docs/chunker.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="chunker">
<h1>Chunker<a class="headerlink" href="#chunker" title="Link to this heading"></a></h1>
<section id="id1">
<h2>Chunker<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="seroflow.chunker.chunker.Chunker">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seroflow.chunker.chunker.</span></span><span class="sig-name descname"><span class="pre">Chunker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.chunker.Chunker" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The Chunker class is used for dividing a large dataset into smaller chunks for processing.
It examines the Pipeline’s indexes for steps that have a defined ‘chunk_size’; if applicable,
calculates the coordinates for each chunk.
It also manages a coordinate queue for chunk processing and provides methods for saving
and reloading the state of the chunker.
The class validates that any loader steps used in chunking are configured to append data.</p>
<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.chunker.Chunker.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.chunker.Chunker.__init__" title="Link to this definition"></a></dt>
<dd><p>Chunker Class Constructor method</p>
<p>Iterates through the provided step index to identify steps that support chunking.
For each step that has a ‘chunk_size’ attribute and is an extractor,
it initializes the chunk coordinates as a tuple containing:</p>
<blockquote>
<div><ul class="simple">
<li><p>The chunk size.</p></li>
<li><p>A starting index (initially 0).</p></li>
<li><p>The maximum row count as provided by step.get_max_row_count().</p></li>
<li><p>A flag (initially False) indicating completion status.</p></li>
</ul>
</div></blockquote>
<p>Also validates that any loader step (identified via is_loader) has its ‘exists’
attribute set to ‘append’, as required when using chunking.
Finally, it initializes a queue for managing chunk coordinates, a state dictionary
for saving the chunker state, and invokes the calculate_chunks() method to populate
the coordinate queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>step_index</strong> (<em>OrderedDict</em>) – An ordered dictionary mapping step keys to step objects in the Pipeline.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.chunker.Chunker.calculate_chunks">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calculate_chunks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.chunker.Chunker.calculate_chunks" title="Link to this definition"></a></dt>
<dd><p>Abstract method: calculate_chunks()
Calculates coordinate values for the chunker.
Each chunk is defined by a start and stop index value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.chunker.Chunker.check_keep_executing">
<span class="sig-name descname"><span class="pre">check_keep_executing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.chunker.Chunker.check_keep_executing" title="Link to this definition"></a></dt>
<dd><p>Public method: check_keep_executing()
Checks if the coordinate queue is empty</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True: if the queue is not empty
False: otherwise</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.chunker.Chunker.dequeue">
<span class="sig-name descname"><span class="pre">dequeue</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.chunker.Chunker.dequeue" title="Link to this definition"></a></dt>
<dd><p>Public method: dequeue()
Removes a value from the coordinate queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple containing start and stop index values corresponding to a chunk</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.chunker.Chunker.enqueue">
<span class="sig-name descname"><span class="pre">enqueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.chunker.Chunker.enqueue" title="Link to this definition"></a></dt>
<dd><p>Public method: enqueue()
Adds a value to the coordinate queue.
Chunking coordinates are tuples containing start and stop index values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a>) – A tuple containing start and stop index values corresponding to a chunk</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.chunker.Chunker.reload">
<span class="sig-name descname"><span class="pre">reload</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.chunker.Chunker.reload" title="Link to this definition"></a></dt>
<dd><p>Public method: reload()
Reloads the chunker state</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple containing the parameter index and global context</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.chunker.Chunker.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.chunker.Chunker.save" title="Link to this definition"></a></dt>
<dd><p>Public method: save()
Saves the chunker state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – Keyword arguments to save, passed as key-value pairs
In this case, the parameter index and global context</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="directchunker">
<h2>DirectChunker<a class="headerlink" href="#directchunker" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="seroflow.chunker.direct_chunker.DirectChunker">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seroflow.chunker.direct_chunker.</span></span><span class="sig-name descname"><span class="pre">DirectChunker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.direct_chunker.DirectChunker" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#seroflow.chunker.chunker.Chunker" title="seroflow.chunker.chunker.Chunker"><code class="xref py py-class docutils literal notranslate"><span class="pre">Chunker</span></code></a></p>
<p>A concrete implementation of the Chunker class that calculates chunk coordinates directly.
It iterates through the steps that support chunking, computes the start and stop indices
based on the chunk size and total row count, and populates the coordinate queue with values.
If a step has finished processing all available rows, a (None, None) tuple is enqueued.</p>
<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.direct_chunker.DirectChunker.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.direct_chunker.DirectChunker.__init__" title="Link to this definition"></a></dt>
<dd><p>Direct Chunker Class Constructor method
Initializes the DirectChunker object by invoking the parent class constructor and
then invoking the calculate_chunks() method to populate the coordinate queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>step_index</strong> (<em>OrderedDict</em>) – An ordered dictionary mapping step keys to step objects in the Pipeline.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.direct_chunker.DirectChunker.calculate_chunks">
<span class="sig-name descname"><span class="pre">calculate_chunks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.direct_chunker.DirectChunker.calculate_chunks" title="Link to this definition"></a></dt>
<dd><p>Public method: calculate_chunks()
Calculates the chunk coordinates for each step in the chunk index.
The chunk coordinates are added to the coordinate queue.
Calculates by using the chunk size and the number of rows in the step.
If the chunk size is greater than the number of rows, the chunk size is set
to the number of rows.
A (None, None) tuple is added to the queue for each step that has finished calculating.</p>
<p>This version produces tuples of (start_index, nrows) for compatibility with
pandas read_csv’s skiprows and nrows.</p>
</dd></dl>

</dd></dl>

</section>
<section id="distributedchunker">
<h2>DistributedChunker<a class="headerlink" href="#distributedchunker" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="seroflow.chunker.distributed_chunker.DistributedChunker">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">seroflow.chunker.distributed_chunker.</span></span><span class="sig-name descname"><span class="pre">DistributedChunker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.distributed_chunker.DistributedChunker" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#seroflow.chunker.chunker.Chunker" title="seroflow.chunker.chunker.Chunker"><code class="xref py py-class docutils literal notranslate"><span class="pre">Chunker</span></code></a></p>
<p>A concrete implementation of the Chunker class that calculates chunk coordinates using a
distributed strategy. Instead of processing chunks in a round-robin manner, this chunker
computes the total number of chunks based on the individual chunk sizes of the steps and
then calculates the start and end indices for each chunk, ensuring an even distribution.</p>
<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.distributed_chunker.DistributedChunker.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.distributed_chunker.DistributedChunker.__init__" title="Link to this definition"></a></dt>
<dd><p>Distributed Chunker Class Constructor
Initializes the DistributedChunker object by invoking the parent class constructor
and then invoking the calculate_chunks() method to populate the coordinate queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>step_index</strong> (<em>OrderedDict</em>) – An ordered dictionary mapping step keys to step objects in the Pipeline.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seroflow.chunker.distributed_chunker.DistributedChunker.calculate_chunks">
<span class="sig-name descname"><span class="pre">calculate_chunks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#seroflow.chunker.distributed_chunker.DistributedChunker.calculate_chunks" title="Link to this definition"></a></dt>
<dd><p>Public method: calculate_chunks()
Calculates the chunk coordinates for each step in the chunk index.
The chunk coordinates are added to the coordinate queue.
Recursive Chunker calculates the chunk coordinates by first calculating the total
number of chunks and then iterating through each chunk to calculate the start index
and number of rows for each chunk.
By using the total number of chunks, the method calculates the base number of rows
per chunk and the remainder. This way, the method can distribute the remainder
among the chunks, resulting in an even distribution of rows.</p>
<p>This version produces tuples of (start_index, nrows) for
compatibility with pandas read_csv.</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cache.html" class="btn btn-neutral float-left" title="Cache" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="context.html" class="btn btn-neutral float-right" title="Context" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Frank Siyung Cho.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>